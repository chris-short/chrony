services:
  chrony:
    image: ghcr.io/chris-short/chrony:latest
    container_name: chrony
    restart: unless-stopped
    cap_drop:
      - ALL
    cap_add:
      - SYS_TIME
    read_only: true
    security_opt:
      - no-new-privileges:true
    ports:
      - "123:123/udp"
    volumes:
      - chrony-data:/var/lib/chrony
      - chrony-run:/run/chrony
      - chrony-log:/var/log/chrony
    environment:
      - TZ=UTC
    networks:
      - default

volumes:
  chrony-data:
  chrony-run:
    driver_opts:
      type: tmpfs
      device: tmpfs
  chrony-log:

networks:
  default:
    driver: bridge
